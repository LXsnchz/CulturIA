name: "CulturIA â€” Generar Trivia Diaria"

on:
  schedule:
    # 23:00 UTC = 00:00 CET (Madrid, horario de invierno)
    # En horario de verano (CEST), esto serÃ­a 01:00 Madrid.
    # Si necesitas exactitud CEST, cambia a "22 * * *".
    - cron: "0 23 * * *"
  workflow_dispatch: # Permite ejecuciÃ³n manual desde la UI de GitHub

permissions:
  contents: write

jobs:
  generar:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ Checkout del repositorio
        uses: actions/checkout@v4

      - name: ğŸ Setup Python 3.11
        uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      - name: ğŸ“¦ Instalar dependencias
        run: pip install groq

      - name: ğŸ¤– Generar trivia del dÃ­a
        env:
          GROQ_API_KEY: ${{ secrets.GROQ_API_KEY }}
        run: python generar_trivia.py

      - name: ğŸ“¤ Commit y push de cambios
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "ğŸ§  CulturIA: nuevo dÃ­a de trivia generado automÃ¡ticamente"
          file_pattern: "historial.json"
          commit_user_name: "CulturIA Bot"
          commit_user_email: "culturia-bot@users.noreply.github.com"
          commit_author: "CulturIA Bot <culturia-bot@users.noreply.github.com>"
